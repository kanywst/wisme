# WIMSE (Workload Identity in Multi System Environments) 概要

## はじめに

WIMSE（Workload Identity in Multi System Environments）は、様々なランタイム環境におけるソフトウェアワークロードの認証と認可のためのアーキテクチャを定義しています。基本的な環境から複雑なマルチサービス、マルチクラウド、マルチテナントのデプロイメントまで対応しています。

このドキュメントでは、WIMSE アーキテクチャの最も基本的な単位である、安全に通信するために互いのアイデンティティを検証する必要がある2つのワークロード間のプロトコルについて説明します。このプロトコルの範囲は、単一のHTTPリクエストとレスポンスのペアです。

## 提案されるプロトコル

異なる環境のニーズに対応するため、WIMSEでは2つのプロトコルを提案しています：

1. **アプリケーションレベルのプロトコル**：ミドルボックスが挿入される環境向け
2. **相互TLS（mTLS）を使用したプロトコル**：エンドツーエンドの暗号化接続が可能な環境向け

これらの2つのプロトコルは互換性があり、単一の呼び出しチェーンで一部の呼び出しに一方のプロトコルを使用し、他の呼び出しにもう一方のプロトコルを使用することができます。例えば、ワークロードAがmTLS認証を使用してワークロードBを呼び出し、次にワークロードBからワークロードCへの呼び出しはアプリケーションレベルで認証することが可能です。

## アプリケーションレベルのプロトコルオプション

アプリケーションレベルの保護については、現在2つの代替ソリューションが提案されています：

1. **DPoP（Demonstrating Proof of Possession）に触発されたオプション**：OAuth DPoP仕様に基づくアプローチ
2. **HTTP Message Signaturesに基づくオプション**：HTTP Message Signatures RFCのプロファイル

## 主要な概念

- **ワークロードアイデンティティ**：ワークロードの識別子とその信頼ドメイン
- **信頼ドメイン**：共通のセキュリティコントロールとポリシーを共有するシステムの論理的なグループ
- **ワークロード識別子**：URIとして定義されるワークロードの一意の識別子
- **Workload Identity Token (WIT)**：ワークロードのアイデンティティを表すJWT
- **Workload Proof Token (WPT)**：DPoPに触発されたオプションで使用される証明トークン

## 利点

- 異なる環境やデプロイメントスタイルに対応する柔軟性
- エンドツーエンドの暗号化が不可能な環境でも安全な通信を実現
- 既存の標準（JWT、TLS、HTTP Message Signatures）に基づく設計
- マルチクラウド、マルチサービス環境での相互運用性
